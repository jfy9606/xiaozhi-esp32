<!DOCTYPE html>
<html>
<head>
  <meta charset='UTF-8'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ESP32S3位置定位</title>
  <link rel='stylesheet' href='https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap'>
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/location.css">
</head>

<body>
  <div class="container">
    <h1>ESP32S3位置定位</h1>
    
    <div class="main-content">
      <div class="map-container">
        <div id="location-map" class="map-canvas">
          <div id="device-marker" class="device-marker">
          <div id="direction-indicator" class="direction-indicator"></div>
          </div>
        </div>
      </div>
      
      <div class="controls-container">
        <div class="mode-controls">
          <button class="mode-button active" id="auto-mode">自动定位</button>
          <button class="mode-button" id="manual-mode">手动调整</button>
        </div>
        
        <div class="location-info">
          <div class="info-grid">
            <div class="info-item">
              <div class="info-label">X坐标</div>
              <div class="info-value" id="x-position">0<span class="info-unit">cm</span></div>
            </div>
            <div class="info-item">
              <div class="info-label">Y坐标</div>
              <div class="info-value" id="y-position">0<span class="info-unit">cm</span></div>
            </div>
            <div class="info-item">
              <div class="info-label">方向角</div>
              <div class="info-value" id="orientation">0<span class="info-unit">°</span></div>
            </div>
            <div class="info-item">
              <div class="info-label">信号强度</div>
              <div class="info-value" id="signal-strength">0<span class="info-unit">db</span></div>
            </div>
          </div>
          
          <button class="action-button" id="calibrate-btn">校准位置</button>
          <button class="action-button" id="set-home-btn">设置为原点</button>
        </div>
        
        <div id="manual-controls" class="manual-controls hidden">
          <div class="slider-container">
            <label for="x-slider">X位置: <span id="x-slider-value">0</span>cm</label>
            <input type="range" id="x-slider" min="0" max="100" step="1" value="50">
          </div>
          <div class="slider-container">
            <label for="y-slider">Y位置: <span id="y-slider-value">0</span>cm</label>
            <input type="range" id="y-slider" min="0" max="100" step="1" value="50">
          </div>
          <div class="slider-container">
            <label for="orientation-slider">方向: <span id="orientation-slider-value">0</span>°</label>
            <input type="range" id="orientation-slider" min="0" max="359" step="1" value="0">
          </div>
          <button class="action-button" id="apply-manual-btn">应用设置</button>
          </div>
          
          <div class="status-container">
            <div class="status">
            <span id="connection-status" class="connection-status"></span>
            <span id="status-text">正在连接...</span>
          </div>
          <div id="debug-info" class="debug-info"></div>
        </div>
      </div>
    </div>
    
    <div class="action-buttons">
      <a href="/" class="back-button">返回主页</a>
      <button id="toggle-debug" class="debug-button">显示调试信息</button>
    </div>
  </div>

  <script src="js/api_client.js"></script>
  <script src="js/location.js"></script>
</body>
</html> 